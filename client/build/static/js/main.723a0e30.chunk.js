(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{30:function(e,t,n){e.exports=n(62)},36:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a=n(12),r=(n(31),n(0)),i=n.n(r),c=n(11),o=n(3),s=n(4),l=n(8),u=n(5),d=n(7),p=(n(36),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getWeather()}},{key:"render",value:function(){if(this.props.data.error)return i.a.createElement("div",{className:"Weather error"},i.a.createElement("div",null,"Shit happens"),0!==this.props.data.id&&i.a.createElement("button",{onClick:this.props.deleteCity,className:"circle"},"x"));console.warn(this.props.data.id);var e=this.props.data.weather;if(!1===this.props.data.waiting){var t=this.props.data.id?"https://openweathermap.org/img/wn/".concat(e.weather[0].icon,".png"):"https://openweathermap.org/themes/openweathermap/assets/vendor/owm/img/widgets/".concat(e.weather[0].icon,".png");return i.a.createElement("div",{className:this.props.data.id?"Weather":"Weather grid"},i.a.createElement("div",{className:this.props.data.id?"mainInfo propsRow flex":"mainInfo grid"},i.a.createElement("div",{className:"cityName"},this.props.data.id?e.name:i.a.createElement("h3",null,e.name)),i.a.createElement("div",{className:"cityTemp"},e.main.temp," \u2103"),i.a.createElement("div",{className:"cityIcon"},i.a.createElement("img",{alt:"weather icon",src:t})),0!==this.props.data.id&&i.a.createElement("div",null,i.a.createElement("button",{onClick:this.props.deleteCity,className:"deleteBtn"},"+"))),i.a.createElement("div",{className:(this.props.data.id,"Info flex")},i.a.createElement("div",{className:"propsRow flex"},i.a.createElement("div",null,"Wind speed:"),i.a.createElement("div",null,e.wind.speed," m/s")),i.a.createElement("div",{className:"propsRow flex"},i.a.createElement("div",null,"Clouds:"),i.a.createElement("div",null,e.clouds.all,"%")),i.a.createElement("div",{className:"propsRow flex"},i.a.createElement("div",null,"Pressure:"),i.a.createElement("div",null,e.main.pressure,"hpa")),i.a.createElement("div",{className:"propsRow flex"},i.a.createElement("div",null,"Humidity:"),i.a.createElement("div",null,e.main.humidity,"%")),i.a.createElement("div",{className:"propsRow flex"},i.a.createElement("div",null,"Coordinates:"),i.a.createElement("div",null,"[",e.coord.lon,", ",e.coord.lat,"]"))))}return i.a.createElement("div",{className:"Weather"},i.a.createElement("div",{className:"loader"}))}}]),t}(i.a.Component)),m=n(14),h=n.n(m),f={cityList:{cities:[],newCityId:1},mainCity:{id:0}},y={longitude:37.62,latitude:55.75},E=n(6),g=n(29),w=n(9);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){return e.cityList.cities},j=function(e){return e.cityList.newCityId},C=function(e){return e.mainCity},I=Object(w.c)({cityList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.cityList,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(console.warn(e),0===t.id)return e;switch(t.type){case"WEATHER_WAIT":return n=e.cities.map((function(e){return e.id===t.id?v({},e,{waiting:!0}):e})),v({},e,{cities:n});case"WEATHER_SUCCESS":return n=e.cities.map((function(e){return e.id===t.id?v({},e,{waiting:!1,weather:t.weather}):e})),v({},e,{cities:n});case"WEATHER_ERROR":return n=e.cities.map((function(e){return e.id===t.id?v({},e,{waiting:!1,error:t.error}):e})),v({},e,{cities:n});case"ADD_CITY":return n=[].concat(Object(g.a)(e.cities),[{id:e.newCityId,name:t.name}]),v({},e,{newCityId:e.newCityId+1,cities:n});case"DELETE_CITY":return n=e.cities.filter((function(e){return e.id!==t.id})),v({},e,{cities:n});default:return e}},mainCity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.mainCity,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0!==t.id)return e;switch(t.type){case"WEATHER_WAIT":return v({},e,{waiting:!0});case"WEATHER_SUCCESS":return v({},e,{waiting:!1,weather:t.weather});case"WEATHER_ERROR":return v({},e,{waiting:!1,error:t.error});default:return e}}}),W=function(e){return{type:"WEATHER_WAIT",id:e}},N=function(e,t){return{type:"WEATHER_SUCCESS",id:t,weather:e}},S=function(e,t){return{type:"WEATHER_ERROR",id:t,error:e}},R=(n(59),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.props),i.a.createElement("div",{className:"WeatherList"},this.props.cities.map((function(t){return i.a.createElement(p,{key:t.id,data:t,getWeather:function(){return e.props.getWeatherByName(t.id,t.name)},deleteCity:function(){return e.props.deleteCity(t.id)}})})))}}]),t}(i.a.Component)),P=Object(E.b)((function(e){return{cities:O(e),newCityId:j(e)}}),(function(e){return{getWeatherByName:function(t,n){return e(function(e,t){return function(n){n(W(e)),h.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&units=metric&APPID=96c2fc4713551153e7966978b449861a")).then((function(t){n(N(t.data,e)),console.log(t.data)})).catch((function(t){n(S(t,e)),console.log(t)}))}}(t,n))},deleteCity:function(t){return e(function(e){return{type:"DELETE_CITY",id:e}}(t))}}}))(R),A=n(13),T=(n(60),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleFormInput=n.handleFormInput.bind(Object(A.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleFormInput",value:function(e){e.preventDefault(),this.props.addCity(e.target[0].value)}},{key:"render",value:function(){return i.a.createElement("div",{className:"AddForm"},i.a.createElement("div",null,i.a.createElement("h2",null,"Favourites")),i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.handleFormInput},i.a.createElement("input",{id:"addCity",placeholder:"Add city",required:!0}),i.a.createElement("button",{className:"addBtn",type:"submit"},"+"))))}}]),t}(i.a.Component)),D=Object(E.b)((function(e){return{nextCityId:j(e),cities:O(e)}}),(function(e){return{addCity:function(t){return e(function(e){return{type:"ADD_CITY",name:e}}(t))}}}))(T),k=(n(61),function(e,t,n){h.a.get("https://api.openweathermap.org/data/2.5/weather?lat=".concat(t.latitude.toFixed(3),"&lon=").concat(t.longitude.toFixed(3),"&units=metric&APPID=96c2fc4713551153e7966978b449861a")).then((function(t){e(N(t.data,n))})).catch((function(t){e(S(t,n))}))}),L=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"header"},i.a.createElement("div",null,i.a.createElement("h1",null,"Weather"))," ",i.a.createElement("div",null,i.a.createElement("button",{className:"geoBtn",onClick:function(){return e.props.getWeatherByCoords()}},"Change Geolocation"))),i.a.createElement(p,{key:0,data:this.props.mainCity,getWeather:function(){return e.props.getWeatherByCoords()}}),i.a.createElement(D,null),i.a.createElement(P,null))}}]),t}(i.a.Component),_=Object(E.b)((function(e){return{mainCity:C(e)}}),(function(e){return{getWeatherByCoords:function(){return e((function(e){e(W(0)),navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){k(e,t.coords,0)}),(function(t){k(e,y,0),console.log("Geolocation error: "+t)}),{enableHighAccuracy:!0,timeout:3e3}):(k(e,y,0),console.log("Geolocation is missing"))}))}}}))(L),x=n(28);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=localStorage["weather-app"]?JSON.parse(localStorage["weather-app"]).newCityId:1,J=localStorage["weather-app"]?JSON.parse(localStorage["weather-app"]).cityList:[],Y=B({},f,{cityList:B({},f.cityList,{cities:J,newCityId:F})}),G=Object(w.d)(I,Y,Object(w.a)(x.a));Object(c.render)(i.a.createElement(E.a,{store:G},i.a.createElement(_,null)),document.getElementById("root")),G.subscribe((function(){localStorage.setItem("weather-app",JSON.stringify({cityList:G.getState().cityList.cities.map((function(e){return{id:e.id,name:e.name}})),newCityId:G.getState().cityList.newCityId}))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.723a0e30.chunk.js.map